<html>
  <head> </head>
  <body>
    <div id="display"></div>
    <p>
      <input id="message" type="text" name="message" placeholder="message" />
    </p>
    <p>
      <input id="username" type="text" name="username" placeholder="username" />
    </p>
    <p>
      <button type="button" onclick="postdata()">Submit Message</button>
    </p>
  </body>
  <script>
    function getmessage() {
      var xmlhttp = new XMLHttpRequest()
      xmlhttp.onreadystatechange = function () {
        if (this.readyState == 4 && this.status == 200) {
          console.log(this.responseText)

          document.getElementById('display').innerHTML = this.responseText
        }
      }
      xmlhttp.open('GET', 'messages.php', true)
      xmlhttp.send()
    }

    function postdata() {
      var xhttp = new XMLHttpRequest()
      var formdata = new FormData()
      formdata.append('message', document.getElementById('message').value)
      formdata.append('username', document.getElementById('username').value)

      xhttp.onreadystatechange = function () {
        if (this.readyState == 4 && this.status == 200) {
          console.log(this.responseText)
        }
      }
      xhttp.open('POST', 'input.php', true)
      xhttp.send(formdata)
    }
    setInterval(getmessage, 1000)
  </script>
</html>
